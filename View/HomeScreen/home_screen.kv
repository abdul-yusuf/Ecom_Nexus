#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import colors kivymd.color_definitions.colors

<HomeScreenView>
    MDBottomNavigation:
        # Add a NavigationItem for each Navigation.
        MDBottomNavigationItem:
            md_bg_color: app.theme_cls.primary_color
            name: "screen 1"
            text: "Home"
            icon: 'home-outline'
    
            # Add Contents here
            MDScrollViewRefreshLayout:
                id: home_refresh_layout
                root_layout: root
                adaptive_height: True
                MDGridLayout:
                    size_hint_y: None
                    height: self.minimum_height
                    cols:1
                    md_bg_color: app.theme_cls.bg_normal
                    MDBoxLayout:
                        adaptive_height: True
                        spacing: 8
                        padding: [10,14,10,4]
                        md_bg_color: app.theme_cls.primary_color
                        Avatar:
                        MDBoxLayout:
                            padding: 10
                            spacing: 10
                            orientation: 'vertical'
                            MDLabel:
                                text: "Hi Hamza Zaid"
                                font_style: "H6"
                            MDLabel:
                                text: "welcome to our store"
                                font_style: "Caption"
                        MDIconButton:
                            icon: "moon-waning-crescent" if app.theme_cls.theme_style == 'Light' else 'weather-sunny'
                            on_release: app.theme_cls.theme_style = 'Dark' if self.icon == "moon-waning-crescent" else 'Light'
                    MDBoxLayout:
                        adaptive_height: True
                        padding: [20,5,23,20]
                        size_hint_x: .9
                        pos_hint_y: .8
                        radius: [0,0,23,23]
                        orientation: 'vertical'
                        md_bg_color: app.theme_cls.primary_color
                        MDTextField:
                            id: search_field
                            mode: "round"
                            icon_left: "magnify"
                            hint_text: "Search Products Categories"
                            multiline: False
                            font_size: '18sp'
                            coursor_width: '1.5sp'
                            # background_color: get_color_from_hex('#ffd747')
                            # foreground_color: get_color_from_hex('#ffd747')
                    MDBoxLayout:
                        padding: [10,0,0,0]
                        adaptive_height: True
                        MDBoxLayout:
                            height: 90
                            size_hint_y: None
                            ScrollView:
                                do_scroll_y: False
                                bar_width: 0
                                MDBoxLayout:
                                    id: categories_layout
                                    orientation: 'horizontal'
                                    adaptive_width: True
                                    spacing: 10
                                    padding: [5,0,0,0]
                                    StoryWithIcon:
                                    StroyWithImage:
                                    StroyWithImage:
                                    StroyWithImage:
                    MDBoxLayout:
                        size_hint_y: None
                        height: 190
                        padding: 10
                        # md_bg_color: get_color_from_hex(colors['Red']['400'])
                        HomeAds:   
                    MDBoxLayout:
                        adaptive_height: True
                        size_hint_y: None
                        height: root.height
                        RecycleView:
                            id: view_1
                            do_scroll_y: False
                            do_scroll_x: False
                            RecycleGridLayout:
                                spacing: 20
                                padding: 10
                                size_hint_y: None
                                default_size: None, None
                                default_size_hint: .1, None
                                height: self.minimum_height
                                cols: 2
                                md_bg_color: get_color_from_hex(colors['Brown']['400'])
        MDBottomNavigationItem:
            name: 'Cart screen'
            icon: 'cart-outline'
            text: 'Cart'
            MDBoxLayout:
                padding: 20
                spacing: 15
                orientation: 'vertical'
                MDLabel:
                    text: "Cart Summary"
                    halign: 'center'
                    font_style: 'H5'
                    adaptive_height:True
                BoxWithShadow:
                    size_hint_y: .3
                    padding: 20
                    pos_hint: {'top':1}
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: "Price(2)"
                            font_style: 'Body2'
                            halign: 'left'
                        MDLabel:
                            text: "Shipping"
                            font_style: 'Body2'
                            halign: 'left'
                        MDSeparator:
                        MDLabel:
                            text: "Total"
                            font_style: 'H6'
                            halign: 'left'
                    MDBoxLayout:
                        orientation: 'vertical'
                        MDLabel:
                            text: "₦12000.00"
                            font_style: 'Body2'
                            halign: 'right'
                        MDLabel:
                            text: "FREE"
                            font_style: 'Body2'
                            halign: 'right'
                        MDSeparator:
                        MDLabel:
                            text: "₦12000.00"
                            font_style: 'H6'
                            halign: 'right'
                RecycleView:
                    id: view_2
                    RecycleGridLayout:
                        cols:1
                        spacing: 20
                        adaptive_height: True
                        default_size: None, None
                        default_size_hint: .1, None
                        padding: 5
                        size_hint_y: None
                        height: self.minimum_height
                MDFillRoundFlatButton:
                    id: checkout_btn
                    text: 'Checkout'
                    font_style: 'Button'
                    font_size: 20
                    size_hint: .9, .114
                    rounded_button: False
                    pos_hint: {'center_x': 0.5,'center_y': 1}
                    on_release:
                        app.onNextScreen(root.name, 'checkout screen')
        
        MDBottomNavigationItem:
            name: 'favourites screen'
            icon: 'heart-outline'
            text: 'Wishlist'
            MDBoxLayout:
                orientation: 'vertical'
                padding: 15
                MDLabel:
                    adaptive_height: True
                    text: "Wishlist"
                    font_style: 'H5'
                    halign: 'center'
                RecycleView:
                    id: view_3
                    RecycleGridLayout:
                        cols:1
                        spacing: 20
                        adaptive_height: True
                        default_size: None, None
                        default_size_hint: .1, None
                        padding: 5
                        size_hint_y: None
                        height: self.minimum_height

        MDBottomNavigationItem:
            name: 'profile screen'
            icon: 'account-outline'
            text: 'Profile'


<Avatar@MDFloatLayout+RoundedRectangularElevationBehavior>
    size_hint: None, None
    size: 55,55
    elevation:5
    radius: self.width/2
    md_bg_color: app.theme_cls.primary_light
    source: 'assets/images/man-1.png'
    FitImage:
        size: root.size[0]-3, root.size[1]-3
        size_hint: None, None
        pos_hint: {'center_x': 0.5,'center_y': 0.5}
        radius: 30
        source: root.source

<StoryWithIcon@MDBoxLayout>
    orientation: 'vertical'
    size_hint: None, None
    width: 60
    spacing: 5
    MDIconButton:
        icon: 'menu'
        theme_text_color: 'Custom'
        pos_hint: {'center_x': 0.5, 'center_y': .5}
        text_color: [1,1,1,1]
        md_bg_color: app.theme_cls.primary_dark
        icon_size: '35sp'
    MDLabel:
        text: "Categories"
        size: self.texture_size
        theme_text_color: 'Primary'
        size_hint_y: None
        halign: 'center'
        font_size: 12
        bold: True

<StroyWithImage@MDBoxLayout>
    orientation: 'vertical'
    size_hint: None, None
    spacing: 5
    width: avatar.width
    source: 'assets/images/cate-5.jpg'
    text: 'Grains'
    Avatar: 
        id: avatar
        source: root.source
        size: 65,65
        pos_hint: {'center_x':.5}
    MDLabel:
        text: root.text
        theme_text_color: 'Primary'
        size_hint_y: None
        size: self.texture_size
        font_size: 12
        shorten: True
        shorten_from: 'right'
        halign: 'center'
        bold: True

<BoxWithShadow@MDBoxLayout+RoundedRectangularElevationBehavior>
    md_bg_color: app.theme_cls.bg_light
    elevation:5
    radius:10